#!/usr/bin/env bash
set -e

echo "ğŸš¨ pre-push: full validation (CI equivalent)"

# ---- nvm åˆæœŸåŒ–ï¼ˆé‡è¦ï¼‰ ----
export NVM_DIR="$HOME/.nvm"
if [ -s "$NVM_DIR/nvm.sh" ]; then
  . "$NVM_DIR/nvm.sh"
else
  echo "âŒ nvm not found"
  exit 1
fi

nvm use 20 >/dev/null

# ---- å®Ÿè¡Œ ----
command -v npm >/dev/null || {
  echo "âŒ npm not found even after nvm init"
  exit 1
}

npm ci
npm run validate

echo "âœ… pre-push passed"
